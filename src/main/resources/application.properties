# server
server.port=8080

# clickhouse connection (HTTP endpoint)
clickhouse.url=http://172.30.117.206:8123
clickhouse.username=default
clickhouse.database=kavach
clickhouse.table=nms_event_adjacent_kavach_train_rri
clickhouse.password=Vamshi@954
logging.level.org.springframework.web.reactive.function.client=DEBUG

# ClickHouse JDBC datasource configuration for Spring Boot
spring.datasource.url=jdbc:clickhouse://172.30.117.206:8123/kavach?compress=0
spring.datasource.username=default
spring.datasource.password=Vamshi@954
spring.datasource.driver-class-name=com.clickhouse.jdbc.ClickHouseDriver



# Concurrent Insert Configuration (optimized for 16GB server)
concurrent.insert.count=6000
concurrent.insert.max-concurrency=500
concurrent.insert.timeout-seconds=300




# WebClient Configuration for concurrent requests (optimized for 16GB server)
spring.webflux.multipart.max-in-memory-size=100MB
spring.webflux.multipart.max-disk-usage-per-part=100MB
spring.webflux.client.max-connections=1000
spring.webflux.client.max-idle-time=30s
spring.webflux.client.max-life-time=60s



# Server thread pool (optimized for 16GB server)
server.tomcat.max-threads=1000
server.netty.max-threads=1000
server.netty.connection-timeout=60s

# Increase request and response timeouts
spring.webflux.client.response-timeout=60s



# JVM tuning (optimized for 16GB server)
spring.task.execution.pool.max-size=1000
spring.task.execution.pool.core-size=500
spring.task.execution.pool.queue-capacity=2000

# ClickHouse Performance Optimizations - CRITICAL for Speed
clickhouse.async_insert=1
clickhouse.wait_for_async_insert=0
clickhouse.async_insert_max_data_size=10485760
clickhouse.async_insert_busy_timeout_ms=200
clickhouse.async_insert_stale_timeout_ms=0



# ClickHouse Server Parameters (Add to ClickHouse config.xml)
# For 11GB RAM, recommended values:
# max_insert_threads=8
# min_insert_block_size_bytes=1048576
# max_memory_usage=9000000000
# max_threads=2000
# max_concurrent_queries=2000
# max_concurrent_inserts=2000
# parts_to_throw_insert=2000
# parts_to_delay_insert=2000
# max_insert_size=1000000000


# HTTP Connection Optimizations (handled above, remove duplicates)
# spring.webflux.client.max-connections=1000
# spring.webflux.client.max-idle-time=60s
# spring.webflux.client.max-life-time=120s

# JVM Performance Optimizations
spring.main.lazy-initialization=true
spring.jpa.open-in-view=false


